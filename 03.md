# 1a Create your first pipeline

Vi har följt stegen:

-   Forka HelloWord
-   Sätta upp i SAzure DevOps GUI
-   Genererad yaml fil:  
 - ASP.NET Core

### [](https://github.com/PGBSNH19/blog-b08/blob/master/03.md#build-and-test-aspnet-core-projects-targeting-net-core)Build and test ASP.NET Core projects targeting .NET Core.

### [](https://github.com/PGBSNH19/blog-b08/blob/master/03.md#add-steps-that-run-tests-create-a-nuget-package-deploy-and-more)Add steps that run tests, create a NuGet package, deploy, and more:

### [](https://github.com/PGBSNH19/blog-b08/blob/master/03.md#httpsdocsmicrosoftcomazuredevopspipelineslanguagesdotnet-core)[https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core](https://docs.microsoft.com/azure/devops/pipelines/languages/dotnet-core)

# 1b Trigger på bygg
## yaml fil när vi först satte upp pipelinen

`trigger:

-   master

pool: vmImage: 'ubuntu-latest'

variables: buildConfiguration: 'Release'

steps:

-   script: dotnet build --configuration $(buildConfiguration) displayName: 'dotnet build $(buildConfiguration)'` 
    
Vi har lyckats skapa vår pipeline
    

### Nästa steg att klona ner gitrepot och lägga till etn sln fil och status badge i readme.md för att sen pusha till master och se om pipelinen fungerar. (Hur den fungerar)

Vi gjorde detta och vi fick notis i Azure Devops att "Recently run pipeline" fungerade och allt var grönt.


# 1a Enkla tester
### Nästa steg är att skapa och lägga till ett enkelt test:

Vi la till en metod som returnerar en bool i HomeController och denna testar vi i vårt Test Project.  
    `public bool ReturnHelloWorld(string helloWorld){ if(helloWorld == "Hello World") { return true; } throw new NotImplementedException("Not fully implemented"); } public IActionResult Index() { var output = ReturnHelloWorld("Hello World"); ViewData["Message"] += " " + output; return View(); }`

Vi insåg att med den folderstrukturen vi har nu vårt test proj inte kommer bli pushad till github..vi kollar på en lösning på detta.

Detta löste vi genom att skapa en till folder dit vi flyttade webappen och test projektet. Sen kopplade vi de samman via en ny solution (sln fil).
Vi fick flytta vår yaml fil för att den skulle känna igen när vi pushar till master.
Vi uppdaterade yaml filem till följande för att inkludera tester:
`trigger:

- master

pool:

vmImage: 'ubuntu-latest'

variables:

buildConfiguration: 'Release'

steps:

- task: DotNetCoreCLI@2

inputs:

command: test

project: '/SimpleWebHalloWorld.Test/*.csproj'

arguments: '--configuration $(buildConfiguration)'

- script: dotnet build --configuration $(buildConfiguration)

displayName: 'dotnet build $(buildConfiguration)'`
